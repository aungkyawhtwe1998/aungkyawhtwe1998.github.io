$(document).ready(function () {
  let currentHeight = $(window).height();
  $(window).scroll(function () {
    let currentPosition = $(this).scrollTop();
    if (currentHeight > currentHeight - 100) {
      $(".site-nav").addClass("site-nav-scroll");
    } else {
      $(".site-nav").removeClass("site-nav-scroll");
      setActive("home");
    }
  });
});

function setActive(current) {
  $(".nav-link").removeClass("current-section");
  //jquery attribute selector
  $(`.nav-link[href='#${current}']`).addClass("current-section");
}

function navScroll() {
  let currentSection = $("section[id]");
  // console.log(currentSection);
  currentSection.waypoint(
    function (direction) {
      if (direction == "down") {
        let currentSectionId = $(this.element).attr("id");
        console.log("currentSectionId: ", currentSectionId);
        setActive(currentSectionId);
      }
    },
    { offset: "25%" }
  );

  currentSection.waypoint(
    function (direction) {
      if (direction == "up") {
        let currentSectionId = $(this.element).attr("id");
        console.log("currentSectionId: ", currentSectionId);
        setActive(currentSectionId);
      }
    },
    { offset: "-10px" }
  );
}
navScroll();
new WOW().init();

$(".record-sliding").slick({
  arrows: false,
  dots: true,
  infinite: false,
  speed: 300,
  slidesToShow: 4,
  slidesToScroll: 4,
  responsive: [
    {
      breakpoint: 1024,
      settings: {
        slidesToShow: 3,
        slidesToScroll: 3,
        infinite: true,
        dots: true,
      },
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 2,
      },
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1,
      },
    },
    // You can unslick at a given breakpoint now by adding:
    // settings: "unslick"
    // instead of a settings object
  ],
});

$(window).on("load", function () {
  $(".loader-container").fadeOut(500, function () {
    $(this).remove();
  });
});
